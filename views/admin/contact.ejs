<%- include('navbar') %>

<style>
body{
  background:#f4f6f9;
}

.page-title{
  font-weight:700;
  color:#1e293b;
}

.admin-card{
  background:#ffffff;
  border-radius:14px;
  box-shadow:0 8px 25px rgba(0,0,0,0.06);
  padding:20px;
}

.table thead{
  background:#111827;
  color:white;
}

.table td, .table th{
  vertical-align:middle;
}

.table tbody tr:hover{
  background:#f8fafc;
}

.gym-preview{
  background:#ffffff;
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.07);
}

.gym-preview p{
  margin-bottom:10px;
  font-size:15px;
}

.gym-preview b{
  color:#2563eb;
}

iframe{
  border-radius:12px;
  margin-top:10px;
}

.form-card{
  background:white;
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 25px rgba(0,0,0,0.06);
}

.form-card label{
  font-weight:600;
  font-size:14px;
}

.form-control{
  border-radius:10px;
}

.btn-success{
  border-radius:10px;
  padding:10px;
  font-weight:600;
}
</style>

<div class="container mt-4">

  <h2 class="page-title bg-success fw-bold p-2 rounded text-dark">Contact Enquiries</h2>

  <div class="admin-card mt-3">

    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Sr.No</th>
          <th>Name</th>
          <th>Email</th>
          <th>Message</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <% if(data.length > 0){ %>
          <% for(var i=0;i<data.length;i++){ %>
            <tr>
              <td><%= i+1 %></td>
              <td><%= data[i].full_name %></td>
              <td><%= data[i].email %></td>
              <td><%= data[i].message %></td>
              <td>
                <a href="/admin/delete_contact/<%= data[i].id %>" class="btn btn-danger btn-sm justify-content-center d-flex" onclick="return confirm('Are you sure you want to delete this enquiry?');">
                  <i class="fas fa-trash-alt"></i>
                </a>
              </td>
            </tr>
          <% } %>
        <% } else { %>
          <tr>
            <td colspan="5" class="text-center text-muted">No Enquiries</td>
          </tr>
        <% } %>
      </tbody>
    </table>

  </div>

  <hr class="my-4">

  <h3 class="page-title bg-success fw-bold text-dark">Gym Information</h3>

  <div class="row mt-3">

    <!-- Preview -->
    <div class="col-md-5">
      <div class="gym-preview">

        <p><b>Address:</b> <%= gym.address %></p>
        <p><b>Phone:</b> <%= gym.phone %></p>
        <p><b>Email:</b> <%= gym.email %></p>

        <iframe src="<%= gym.map_embed %>" width="100%" height="220"></iframe>

      </div>
    </div>

    <!-- Update Form -->
    <div class="col-md-7">
      <div class="form-card">

        <form action="/admin/update_gym_info" method="post">

          <input type="hidden" name="id" value="<%= gym.id %>">

          <div class="mb-3">
            <label>Address</label>
            <textarea name="address" class="form-control"><%= gym.address %></textarea>
          </div>

          <div class="mb-3">
            <label>Phone</label>
            <input name="phone" class="form-control" value="<%= gym.phone %>">
          </div>

          <div class="mb-3">
            <label>Email</label>
            <input name="email" class="form-control" value="<%= gym.email %>">
          </div>

          <div class="mb-3">
            <label>Map Embed URL</label>
            <input name="map_embed" class="form-control" value="<%= gym.map_embed %>">
          </div>

          <button class="btn btn-success w-100"><i class="fas fa-edit"></i> Update</button>

        </form>

      </div>
    </div>

  </div>

</div>

<%- include('footer') %>
