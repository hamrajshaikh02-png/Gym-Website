<%- include("navbar") %>

<div class="container mt-4">

<h3 class="fw-bold mb-4 text-dark p-3 rounded bg-success">
   Gallery Management
</h3>

<!-- Upload Form -->
<div class="card p-3 mb-4">
<h5 class="mb-3 fw-bold">Upload New Images</h5>

<form action="/admin/add-gallery" method="post" enctype="multipart/form-data">

  <div class="row">
    <div class="col-md-4 mb-3">
      <label class="fw-semibold">Select Section</label>
      <select name="section" class="form-control">
        <option value="workout">Workout</option>
        <option value="cardio">Cardio</option>
        <option value="strength">Strength</option>
        <option value="yoga">Yoga</option>
      </select>
    </div>

    <!-- <div class="col-md-4 mb-3">
      <label class="fw-semibold">Image Title (Optional)</label>
      <input type="text" name="title" class="form-control" placeholder="Eg. Morning Workout">
    </div> -->

    <div class="col-md-4 mb-3">
      <label class="fw-semibold">Select Images</label>
      <input type="file" name="images" multiple class="form-control">
    </div>
  </div>

  <button class="btn btn-success"><i class="fas fa-upload"></i> Upload Images</button>
</form>
</div>

<!-- Gallery -->
<div class="row g-3">
<% gallery.forEach(img => { %>
  <div class="col-6 col-md-3">
    <div class="border rounded overflow-hidden bg-white">
      
      <img src="/images/<%= img.image %>" 
           loading="lazy"
           class="w-100"
           style="height:160px;object-fit:cover;">

      <div class="p-2 text-center bg-light">
        <small class="text-muted d-block">
          Section: <%= img.section %>
        </small>

        <% if(img.title && img.title.trim()!=""){ %>
          <small class="fw-semibold d-block text-dark">
            <%= img.title %>
          </small>
        <% } %>

        <a href="/admin/delete_gallery/<%= img.id %>" 
           class="btn btn-sm btn-danger w-100 mt-1">
           <i class="fas fa-trash"></i> Delete
        </a>
      </div>

    </div>
  </div>
<% }) %>
</div>

</div>

<%- include("footer") %>
